!function(){const t=document.querySelector(".game-screen"),e=["pacman","bug","evil","IE","heart","diamonds","clubs","spades"],s=t.getBoundingClientRect(),o=document.querySelector(".btn-start"),i=document.querySelector(".btn-top"),n=document.querySelector(".btn-down"),c=document.querySelector(".btn-left"),a=document.querySelector(".btn-right"),l=document.querySelector(".score");let r;function h(t,e,s){const o=`<svg class="spahe-${t}"><use xlink:href="#icon-${t}"></use></svg>`;e.insertAdjacentHTML("beforeend",o);e.querySelectorAll('[class*="spahe-"]').forEach((t=>{const o=function(t,e,s){return Math.floor(Math.random()*((e-t)/s+1))*s+t+"px"}(15,60,5);t.style.width=o,t.style.height=o,t.style.fill=function(){return`#${Math.floor(16777215*Math.random()).toString(16).padStart(6,0)}`}(),t.style.borderRadius="50%";const i=t.getBoundingClientRect();let n=i.left-s.left,c=i.top-s.top;const a=e.offsetWidth-2*t.clientWidth,l=e.offsetHeight-2*t.clientHeight;setInterval((function(){switch(Math.floor(4*Math.random())){case 0:c>0&&(c-=20);break;case 1:c<l&&(c+=20);break;case 2:n<a&&(n+=20);break;case 3:n>0&&(n-=20)}t.style.left=n+"px",t.style.top=c+"px";const e=d.personage.getBoundingClientRect(),s=t.getBoundingClientRect();e.left<s.right&&e.right>s.left&&e.top<s.bottom&&e.bottom>s.top&&f()}),50)}))}function p(e){if(e.preventDefault(),t.classList.contains("is-started"))switch(e.type){case"click":switch(e.target.closest("button")){case i:d.moveTop();break;case n:d.moveDown();break;case c:d.moveLeft();break;case a:d.moveRight()}break;case"keydown":switch(e.keyCode){case 38:d.moveTop();break;case 40:d.moveDown();break;case 37:d.moveLeft();break;case 39:d.moveRight()}}}const d={personage:document.querySelector(".goose"),topPosition:0,leftPosition:0,step:5,score:0,defaultPos:[],init(){const t=this.personage.getBoundingClientRect();this.topPosition=t.top-s.top,this.leftPosition=t.left-s.left,this.defaultPos.length?(this.topPosition=this.defaultPos[0],this.leftPosition=this.defaultPos[1]):this.defaultPos.push(this.topPosition,this.leftPosition),this.personage.style.top=this.defaultPos[0]+"px",this.personage.style.left=this.defaultPos[1]+"px"},moveTop(){this.topPosition>0&&(this.topPosition-=this.step,this.personage.style.top=this.topPosition+"px")},moveDown(){this.topPosition<t.offsetHeight-this.personage.clientHeight&&(this.topPosition+=this.step,this.personage.style.top=this.topPosition+"px")},moveRight(){this.leftPosition<t.offsetWidth-this.personage.clientWidth&&(this.leftPosition+=this.step,this.personage.style.left=this.leftPosition+"px")},moveLeft(){this.leftPosition>0&&(this.leftPosition-=this.step,this.personage.style.left=this.leftPosition+"px")},expirienceInc(){this.score+=100,l.innerHTML=this.score},sppeedUp(){this.step*=1.1}};function f(){t.classList.remove("is-started"),t.querySelectorAll('[class*="spahe-"]').forEach((t=>t.remove())),clearInterval(r),l.innerHTML=0}i.addEventListener("click",p),n.addEventListener("click",p),c.addEventListener("click",p),a.addEventListener("click",p),document.addEventListener("keydown",p),o.addEventListener("click",(function(o){t.classList.contains("is-started")||(d.init(),o.preventDefault(),t.classList.add("is-started"),e.forEach((e=>{h(e,t,s)})),clearInterval(r),r=setInterval((()=>{d.expirienceInc(),d.sppeedUp()}),2e3))}))}();